"use strict";const input=document.querySelector("#search"),button=document.querySelector(".btn"),results=document.querySelector(".results"),favorites=document.querySelector(".favorites"),api="http://api.tvmaze.com/search/shows?q=",savedFavorites=JSON.parse(localStorage.getItem("favorites"));let favoritesList=[];const checkboxListener=()=>{const e=document.querySelectorAll(".checkbox");for(const t of e)t.addEventListener("change",makeFavorites)},showSeries=e=>{results.innerHTML="";for(let t=0;t<e.length;t++){const s=e[t],i=document.createElement("li");i.classList.add("results-card"),i.setAttribute("data-id",t);const a=document.createElement("h2");a.classList.add("title");const o=document.createTextNode(s.name),r=document.createElement("img");r.classList.add("image"),r.style="height: 200px",r.setAttribute("alt",s.name),s.image?r.setAttribute("src",s.image):r.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV");const c=document.createElement("input");c.classList.add("checkbox"),c.setAttribute("type","checkbox"),a.appendChild(o),i.appendChild(a),i.appendChild(r),i.appendChild(c),results.appendChild(i)}checkboxListener()},makeFavorites=()=>{const e=document.querySelectorAll(".results-card"),t=[];for(let s=0;s<e.length;s++){const i=e[s],a={title:i.childNodes[0].innerHTML,image:i.childNodes[1].src};i.childNodes[2].checked?(i.classList.add("favorite"),t.push(a),console.log(t)):i.classList.remove("favorite")}checkFavorites(),favoritesList=[...t,...favoritesList],console.log(favoritesList),printFavorites(favoritesList),saveFavorites(favoritesList)},checkFavorites=()=>{if(savedFavorites){return[savedFavorites]}return favoritesList},printFavorites=e=>{favorites.innerHTML="";for(const t of e){const e=document.createElement("li");e.classList.add("fave");const s=document.createElement("h3");s.classList.add("fave-title");const i=document.createTextNode(t.title),a=document.createElement("img");a.classList.add("fave-image"),a.style="height: 200px",a.setAttribute("src",t.image),a.setAttribute("alt",t.title),s.appendChild(i),e.appendChild(a),e.appendChild(s),favorites.appendChild(e)}},saveFavorites=e=>{localStorage.setItem("favorites",JSON.stringify(e))},getSeries=()=>{const e=input.value,t=[];fetch(`${api}${e}`).then(e=>e.json()).then(e=>{for(let s=0;s<e.length;s++){const i=e[s].show,a={};a.name=i.name,null!==i.image&&(a.image=i.image.original),t.push(a)}console.log("array of series",t),showSeries(t)})};button.addEventListener("click",getSeries),input.addEventListener("keyup",function(e){13===e.keyCode&&getSeries()});